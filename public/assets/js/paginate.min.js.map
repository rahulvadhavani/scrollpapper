{"version":3,"sources":["paginate.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"paginate.min.js","sourcesContent":["var filter_url = '';\r\nvar filters = {\r\n    totalItems: 0,\r\n    itemPerPage: 5,\r\n    currentPage: 1,\r\n    totalPages: 1\r\n};\r\nvar multipleFilter = [];\r\nvar div_id = '';\r\n\r\n$(document).ready(function (){\r\n    $('#recordPerPage').val(filters.itemPerPage);\r\n    $('#status_search').trigger('focus');\r\n    \r\n    $(document).on('click','.page_no',function(){\r\n        var cp = $(this).data('page');\r\n        var table = $(this).data('table');\r\n        \r\n        filters.currentPage = cp;\r\n        var furl = multipleFilter[table]['filter_url'];\r\n//        console.log(table,furl);\r\n//        console.log(multipleFilter);\r\n//        filterData(filter_url);\r\n        filterData(furl,table);\r\n    });\r\n    \r\n    $(document).on('keydown','.ui-autocomplete-input',function(e){\r\n        var k = e.which;\r\n        \r\n        if(k == 40 || k == 38){\r\n            $('.ui-autocomplete .ui-menu-item').removeClass('custom-autocomplete-hover');\r\n            $('.ui-autocomplete li a').each(function(){\r\n                \r\n                if($(this).hasClass('ui-state-focus')){\r\n//                    console.log($(this));\r\n                    $(this).parent('li').addClass('custom-autocomplete-hover');\r\n                }\r\n            });\r\n//            console.log($('.ui-autocomplete li').find('a .ui-state-focus').html());\r\n            \r\n//            $('.ui-autocomplete li').find('a .ui-state-focus').parent('li').addClass('custom-autocomplete-hover');\r\n        }\r\n    });\r\n});\r\n\r\nfunction changeRecordPerPage(url,table){\r\n    var id = '';\r\n    if(typeof table !== 'undefined'){\r\n        id= '-'+table;\r\n    }\r\n    var recPp = $('#recordPerPage'+id).val();\r\n    if(recPp == '' || recPp <= 0){\r\n        Toast(0,'Please select valid page limit');\r\n        return false;\r\n    }\r\n    filters.currentPage = 1;\r\n    filters.itemPerPage = recPp;\r\n    \r\n    if(typeof table === 'undefined'){\r\n        table = 'table-data';\r\n    }\r\n    filterData(url,table);\r\n}\r\n\r\nfunction filterData(url,table){\r\n    \r\n    var token = $(\"#token\").val();\r\n    filters._token=token;\r\n    if(typeof table === 'undefined'){\r\n        table = 'table-data';\r\n    }\r\n//    console.log(filters);\r\n//    console.log(multipleFilter[table]);\r\n    var flush = 1;\r\n    if(typeof multipleFilter[table] !== 'undefined' && typeof multipleFilter[table]['filters'] !== 'undefined'){\r\n        flush = 0;\r\n//        console.log(multipleFilter[table]['filters'],filters);\r\n        $.each(multipleFilter[table]['filters'],function(k,v){\r\n//            console.log(k,v);\r\n            if(typeof filters[k] === 'undefined'){\r\n                filters[k] = v;\r\n            }\r\n        });\r\n//        console.log(multipleFilter[table]['filters'],filters);\r\n    }else{\r\n        multipleFilter[table] = {};\r\n    }\r\n    \r\n    var jdata = filters;\r\n    \r\n    \r\n    filter_url = url;\r\n    \r\n    $.ajax({\r\n        type:'POST',\r\n        url:url,\r\n        // dataType: 'json',\r\n        data:JSON.stringify(jdata),\r\n        contentType: \"application/json\",\r\n        async:false,\r\n        success: function(res){\r\n            if(res.flag === 0){\r\n                console.log(res);\r\n            }else{\r\n                $(\"#\"+table).html(res.blade);\r\n                filters.totalItems = res['total_record'];\r\n                filters.totalPages = filters.totalItems > 0 ? Math.ceil(filters.totalItems / filters.itemPerPage) : 0;\r\n                setPagination(table);\r\n            }\r\n            \r\n            multipleFilter[table]['filters'] = filters;\r\n            multipleFilter[table]['filter_url'] = filter_url;\r\n            flushFilters(flush);\r\n            \r\n        }, \r\n    });\r\n    \r\n    \r\n}\r\nfunction flushFilters(keep){\r\n    \r\n    if(keep){\r\n        filters = {\r\n            totalItems: 0,\r\n            itemPerPage: filters.itemPerPage,\r\n            currentPage: 1,\r\n            totalPages: 1\r\n        };\r\n    }else{\r\n        filters = {};\r\n    }\r\n}\r\nfunction setPagination(table){\r\n    var tp = filters.totalPages;\r\n    var cp = filters.currentPage;\r\n    \r\n    var p = prevPage(cp,tp,0);\r\n    var li = '';\r\n    var fl = '<a class=\"btn-sm px-3 btn-secondary ml-1 page_no\" data-page=\"'+1+'\"  data-table=\"'+table+'\" data-type=\"f\" href=\"#\"><i class=\"fa fa-angle-double-left\"></i></a>';\r\n    var ll = '<a href=\"#\" data-page=\"'+tp+'\" data-type=\"l\" data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no\"><i class=\"fa fa-angle-double-right\"></i></a>';\r\n    var pp = '<a href=\"#\" data-page=\"'+p+'\" data-type=\"p\"  data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no\"><i class=\"fa fa-angle-left\"></i></a>';\r\n    var p = prevPage(cp,tp,1);\r\n    var np = '<a href=\"#\" data-page=\"'+p+'\" data-type=\"n\"  data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no\"><i class=\"fa fa-angle-right\"></i></a>';\r\n    var ns = '';\r\n    var ps = '';\r\n    var prev = cp - 7;\r\n    var next = cp + 7;\r\n    var pflag = 1;\r\n    var nflag = 1;\r\n    if(prev < 0){\r\n        pflag = 0;\r\n    }\r\n    if(next > tp){\r\n        pflag = 0;\r\n    }\r\n    if(tp < 7){\r\n        for(i = 1;i<=tp;i++){\r\n            li += '<a href=\"#\" data-page=\"'+i+'\" data-type=\"'+i+'\"  data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no\">'+i+'</a>';\r\n        }\r\n    }else{\r\n        var nd = nextDigit(cp,tp,1);\r\n        var dp = nextDigit(cp,tp,0);\r\n        if(nd<tp){\r\n          ns = '<a href=\"#\" data-page=\"'+(nd+1)+'\" data-type=\"'+(nd+1)+'\"  data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no other-page\"><i class=\"fa fa-ellipsis-h\"></i></a>';\r\n        }\r\n        \r\n        if(dp == nd){\r\n            dp = (nd-7) > 0 ? (nd-7) : 1;\r\n        }\r\n//        console.log(dp + ' - ' + nd);\r\n        if(dp>1){\r\n            ps = '<a href=\"#\" data-page=\"'+(dp-1)+'\" data-type=\"'+(dp-1)+'\"  data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no other-page\"><i class=\"fa fa-ellipsis-h\"></i></a>';\r\n        }\r\n        \r\n        \r\n        \r\n        for(i=dp;i<=nd;i++){\r\n            li += '<a href=\"#\" data-page=\"'+i+'\" data-type=\"'+i+'\"  data-table=\"'+table+'\" class=\"btn-sm px-3 btn-secondary ml-1 page_no\">'+i+'</a>';\r\n        }\r\n    }\r\n    \r\n    li = fl+pp+ps+li+ns+np+ll;\r\n    var cls1 = '';\r\n    var cls2 = '';\r\n    if($('.pagination').hasClass(table)){\r\n        cls1 = '.'+table;\r\n        cls2 = '.'+table;\r\n    }\r\n    \r\n    $(cls1+'.pagination').html(li);\r\n\r\n    $(cls1+' .page_no').each(function(){\r\n        var tp = $(this).data('type');\r\n        if(tp == cp){\r\n            $(this).addClass('active');\r\n        }\r\n    });\r\n    \r\n    if(cp == 1){\r\n        $(cls2+'.pagination a:first-child').removeClass('page_no').addClass('pagination-disable');\r\n        $(cls2+'.pagination a:nth-child(2)').removeClass('page_no').addClass('pagination-disable');\r\n    }\r\n    if(cp == tp){\r\n        $(cls2+'.pagination a:last-child').removeClass('page_no').addClass('pagination-disable');\r\n        $(cls2+'.pagination a:nth-last-child(2)').removeClass('page_no').addClass('pagination-disable');\r\n    }\r\n    if(tp <= 1){\r\n        $(cls1+'.pagination').html('');\r\n    }\r\n    \r\n}\r\nfunction prevPage(cp,tp,t){\r\n    var p = 1;\r\n    if(t){\r\n        p = cp + 1 < tp ? cp + 1 : tp > 0 ? tp : 1;\r\n    }else{\r\n        p = cp - 1 > 0 ? cp - 1 : 1;\r\n    }\r\n    \r\n    return p;\r\n}\r\n\r\nfunction nextDigit(cp,tp,t){\r\n    if(t){\r\n        for(i=cp;i<=tp;i++){\r\n            if(i%7 == 0){\r\n                return i;\r\n            }\r\n        }\r\n        return tp;\r\n    }else{\r\n        for(i=cp;i>0;i--){\r\n            if(i%7 == 0){\r\n                return i;\r\n            }\r\n        }\r\n        return 1;\r\n    }\r\n    \r\n}\r\n\r\n// Toast\r\nvar Toast = Swal.mixin({\r\n  toast: true,\r\n  position: 'top-end',\r\n  showConfirmButton: false,\r\n  timer: 3000,\r\n});\r\n\r\nfunction notify(flag,msg){\r\n  if(flag==1){\r\n  Toast.fire({\r\n    icon: 'success',\r\n    title: msg\r\n  })\r\n}else{\r\n   Toast.fire({\r\n    icon: 'error',\r\n    title: msg\r\n  })\r\n}\r\n}"]}